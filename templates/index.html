<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coursera Bot ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫—É—Ä—Å–æ–≤</title>
  <link rel="stylesheet" href="/static_files/style.css"/>
</head>
<body>
  <div class="container">
    <h1>Coursera Bot ü§ñ</h1>
    <p class="subtitle">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤</p>

    <form id="bot-form">
      <label for="email">Coursera Email:</label>
      <input type="email" id="email" placeholder="example@gmail.com" required>

      <label for="password">Coursera –ü–∞—Ä–æ–ª—å:</label>
      <input type="password" id="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>

      <label for="links">–°—Å—ã–ª–∫–∏ –Ω–∞ –∫—É—Ä—Å—ã (–≤—Å—Ç–∞–≤–ª—è–π –¥–æ 10 —Å—Å—ã–ª–æ–∫ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –∫–∞–∂–¥–∞—è!):</label>
      <textarea id="links" rows="5" placeholder="https://www.coursera.org/learn/python
https://www.coursera.org/learn/sql"></textarea>

      <button type="submit" id="start-btn">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞</button>
    </form>

    <div id="status-box" class="hidden">
      <h3>–°—Ç–∞—Ç—É—Å:</h3>
      <p id="status-text">–ó–∞–ø—É—Å–∫...</p>
    </div>
  </div>

  <script>
    const form = document.getElementById("bot-form");
    const statusBox = document.getElementById("status-box");
    const statusText = document.getElementById("status-text");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      statusBox.classList.remove("hidden");
      statusText.textContent = "–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...";

      const data = {
        email: document.getElementById("email").value,
        password: document.getElementById("password").value,
        links: document.getElementById("links").value.split("\n").filter(x => x.trim() !== "")
      };

      try {
        const res = await fetch("/start_bot", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        if (!res.ok) throw new Error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞");
        const result = await res.json();
        statusText.textContent = "‚úÖ " + (result.status || "–ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!");
      } catch (err) {
        statusText.textContent = "‚ùå –û—à–∏–±–∫–∞: " + err.message;
      }
    });
  </script>
</body>
</html>
